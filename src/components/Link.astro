---
import Element from '@/components/Element.astro'
import type { HTMLAttributes } from 'astro/types'
import Icon from './Icon.astro'

interface Props extends HTMLAttributes<'a'> {
  size?: 'sm' | 'default' | 'lg' | undefined
  text?: string | undefined
  href?: string | undefined
  icon?: string | undefined
}

const {
  size = 'default',
  href,
  target = href?.startsWith('http') ? '_blank' : undefined,
  text,
  icon,
  ...rest
} = Astro.props
---

<Element
  as="a"
  class:list={[
    'link inline-flex items-center gap-2 text-foreground/80 transition  hover:text-foreground',
    {
      'text-foreground': Astro.params.page === href,
      'gap-1.5 text-sm': size === 'sm',
      'gap-2 text-base': size === 'default',
      'gap-2.5 text-lg': size === 'lg',
    },
  ]}
  {href}
  {target}
  {...rest}
>
  <Icon
    class="size-[1.25em] origin-center scale-125"
    name={icon}
  />
  <Fragment set:html={text} />
  <slot />
</Element>
