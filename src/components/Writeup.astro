---
import type { ComponentProps, HTMLAttributes } from 'astro/types'
import Badge from 'fulldev-ui/components/Badge.astro'
import Element from 'fulldev-ui/components/Element.astro'
import Heading from 'fulldev-ui/components/Heading.astro'
import List from 'fulldev-ui/components/List.astro'
import Rating from 'fulldev-ui/components/Rating.astro'
import Tagline from 'fulldev-ui/components/Tagline.astro'
import Text from 'fulldev-ui/components/Text.astro'

interface Props extends ComponentProps<typeof Element>, HTMLAttributes<'div'> {
  level?: ComponentProps<typeof Heading>['level']
  rating?: ComponentProps<typeof Rating> | undefined
  badge?: ComponentProps<typeof Badge> | undefined
  tagline?: ComponentProps<typeof Tagline>['html']
  heading?: ComponentProps<typeof Heading>['text']
  text?: ComponentProps<typeof Text>['text']
  list?: ComponentProps<typeof List>['items']
  align?: 'start' | 'center' | 'end' | undefined
}

const {
  level = 2,
  rating,
  badge,
  tagline,
  heading,
  text,
  list,
  ...rest
} = Astro.props
---

<Element
  class:list="writeup"
  as="div"
  {...rest}
>
  <slot>
    <Rating
      color="brand"
      {...rating}
    />
    <Badge {...badge} />
    <Tagline html={tagline} />
    <Heading
      {level}
      html={heading}
    />
    <Text
      lead={level === 1}
      html={text}
    />
    <List items={list} />
  </slot>
</Element>

<style is:global lang="scss">
  @layer fulldev {
    .writeup {
      display: flex;
      position: relative;
      flex-direction: column;
      align-items: inherit;
      gap: var(--space-4);
      text-align: inherit;

      &.align-start {
        align-items: flex-start;
        text-align: left;
      }

      &.align-center {
        align-items: center;
        text-align: center;
      }

      &.align-end {
        align-items: flex-end;
        text-align: right;
      }
    }
  }
</style>
