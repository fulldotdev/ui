---
import type { ComponentProps, HTMLAttributes } from 'astro/types'
import Badge from 'fulldev-ui/components/Badge.astro'
import Element from 'fulldev-ui/components/Element.astro'
import Heading from 'fulldev-ui/components/Heading.astro'
import Icon from 'fulldev-ui/components/Icon.astro'
import List from 'fulldev-ui/components/List.astro'
import Rating from 'fulldev-ui/components/Rating.astro'
import Tagline from 'fulldev-ui/components/Tagline.astro'
import Text from 'fulldev-ui/components/Text.astro'

interface Props extends ComponentProps<typeof Element>, HTMLAttributes<'div'> {
  level?: ComponentProps<typeof Heading>['level']
  badge?: ComponentProps<typeof Badge> | undefined
  tagline?: ComponentProps<typeof Tagline>['text']
  heading?: ComponentProps<typeof Heading>['text']
  text?: ComponentProps<typeof Text>['text']
  list?: ComponentProps<typeof List>['items']
  icon?: ComponentProps<typeof Icon>['name']
  align?: 'start' | 'center' | 'end' | undefined
  rating?:
    | ComponentProps<typeof Rating>
    | ComponentProps<typeof Rating>['value']
}

const {
  level = 2,
  rating,
  badge,
  tagline,
  heading,
  text,
  list,
  icon,
  ...rest
} = Astro.props
---

<Element
  class:list="writeup"
  as="div"
  {...rest}
>
  <slot>
    <Icon name={icon} />
    <Rating
      color="brand"
      {...typeof rating === 'number' ? { value: rating } : rating}
    />
    <Badge {...badge} />
    <Tagline text={tagline} />
    <Heading
      {level}
      text={heading}
    />
    <Text
      lead={level === 1}
      text={text}
    />
    <List items={list} />
  </slot>
</Element>

<style is:global lang="scss">
  @layer fulldev {
    .writeup {
      display: flex;
      position: relative;
      flex-direction: column;
      align-items: inherit;
      gap: var(--space-4);
      text-align: inherit;

      &.align-start {
        align-items: flex-start;
        text-align: left;
      }

      &.align-center {
        align-items: center;
        text-align: center;
      }

      &.align-end {
        align-items: flex-end;
        text-align: right;
      }
    }
  }
</style>
