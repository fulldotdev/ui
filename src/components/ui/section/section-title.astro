---
import type { HTMLAttributes } from "astro/types"
import { cva, type VariantProps } from "class-variance-authority"

import { cn } from "@/lib/utils"

const variants = cva(
  "text-foreground scroll-mt-20 leading-[1.1] font-semibold text-pretty",
  {
    variants: {
      size: {
        sm: "max-w-2xl [h1]:text-3xl [h2]:text-2xl [h3]:text-xl [h4]:text-lg [h5]:text-base [h6]:text-sm",
        default:
          "max-w-3xl [h1]:text-4xl [h2]:text-3xl [h3]:text-2xl [h4]:text-xl [h5]:text-lg [h6]:text-base",
        lg: "max-w-4xl [h1]:text-4xl lg:[h1]:text-5xl [h2]:text-4xl [h3]:text-3xl [h4]:text-2xl [h5]:text-xl [h6]:text-lg",
      },
    },

    defaultVariants: {
      size: "default",
    },
  }
)

interface Props extends HTMLAttributes<"h1">, VariantProps<typeof variants> {
  as?: "h1" | "h2" | "h3" | "h4" | "h5" | "h6"
}

const { class: className, as: Comp = "h1", size, ...props } = Astro.props

const slot = await Astro.slots.render("default")
---

{
  slot?.trim().length > 0 && (
    <Comp class={cn(variants({ size }), className)} {...props}>
      <Fragment set:html={slot} />
    </Comp>
  )
}
