---
import type { HTMLAttributes } from "astro/types"
import { cva, type VariantProps } from "class-variance-authority"

import { cn } from "@/lib/utils"

const contentVariants = cva(
  "animation-duration-20000 flex w-full min-w-full shrink-0 justify-around gap-6",
  {
    variants: {
      direction: {
        left: "animate-[marquee-horizontal_linear_infinite]",
        right: "reverse animate-[marquee-horizontal_linear_infinite_reverse]",
        top: "animate-[marquee-vertical_linear_infinite] flex-col",
        bottom: "animate-[marquee-vertical_linear_infinite_reverse] flex-col",
      },
      pauseOnHover: {
        true: "group-hover:[animation-play-state:paused]",
        false: "",
      },
    },
    defaultVariants: {
      direction: "left",
      pauseOnHover: false,
    },
  }
)

type Props = HTMLAttributes<"div"> & VariantProps<typeof contentVariants>

const { class: className, direction, pauseOnHover, ...props } = Astro.props

const slot = await Astro.slots.render("default")
---

<div
  class={cn(contentVariants({ direction, pauseOnHover }), className)}
  data-slot="marquee-content"
  data-direction={direction}
  {...props}
>
  <Fragment set:html={slot} />
</div>
<div
  class={cn(contentVariants({ direction, pauseOnHover }), className)}
  data-slot="marquee-content"
  data-direction={direction}
  {...props}
>
  <Fragment set:html={slot} />
</div>

<style>
  @keyframes marquee-horizontal {
    from {
      transform: translateX(0);
    }
    to {
      transform: translateX(-100%);
    }
  }
</style>
