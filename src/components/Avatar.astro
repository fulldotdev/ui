---
import type { HTMLAttributes } from 'astro/types'
import { Image } from 'astro:assets'

interface Props extends Omit<HTMLAttributes<'img'>, 'width' | 'height'> {
  size?: 'sm' | 'md' | 'lg' | undefined
  src?: string | undefined
  alt?: string | undefined
}

const { size = 'md', alt = '', src, ...rest } = Astro.props

const sizeMap = {
  sm: 36,
  md: 40,
  lg: 44,
}
---

{
  src && (
    <Image
      class:list={`avatar size-${size}`}
      width={sizeMap[size]}
      height={sizeMap[size]}
      alt={alt}
      {src}
      {...rest}
    />
  )
}

<style>
  @layer fulldev {
    .avatar {
      display: block;
      border-radius: var(--radius-full);
      object-fit: cover;

      &.size-sm {
        width: var(--spacing-9);
        height: var(--spacing-9);
      }

      &.size-md {
        width: var(--spacing-10);
        height: var(--spacing-10);
      }

      &.size-lg {
        width: var(--spacing-11);
        height: var(--spacing-11);
      }
    }
  }
</style>
