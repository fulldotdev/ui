---
import type { ComponentProps, HTMLAttributes } from 'astro/types'
import Element from 'fulldev-ui/components/Element.astro'
import Label from 'fulldev-ui/components/Label.astro'
import type { GlobalProps } from 'fulldev-ui/types/global-props'

interface Props extends GlobalProps, HTMLAttributes<'input'> {
  label?: ComponentProps<typeof Label>['text']
}

const {
  label,
  id,
  name,
  placeholder,
  value,
  disabled,
  checked,
  required,
  ...rest
} = Astro.props
---

<Element
  class:list="checkbox"
  {...rest}
>
  <Element
    as="input"
    type="checkbox"
    id={id ?? name ?? label}
    if={id ?? name ?? label}
    name={name ?? label ?? id}
    {disabled}
    {placeholder}
    {required}
    {checked}
    {...rest}
  />
  <Label
    for={id ?? name ?? label}
    text={label}
  />
</Element>

<style is:global>
  @layer fulldev {
    .checkbox {
      @apply flex items-center gap-2;

      input {
        @apply block h-4 w-4 accent-primary;
      }
    }
  }
</style>
