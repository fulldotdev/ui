---
import type { HTMLAttributes } from 'astro/types'
import Element from 'fulldev-ui/components/Element.astro'
import Icon from 'fulldev-ui/components/Icon.astro'
import Label from 'fulldev-ui/components/Label.astro'

interface Props extends HTMLAttributes<'input'> {
  size?: 'sm' | 'md' | 'lg' | undefined
  label?: string | undefined
}

const { label, name = label, id = name, size = 'md', ...rest } = Astro.props
---

<Label
  class:list="checkbox"
  for={id}
  {size}
>
  <Element
    class:list="checkbox-input"
    as="input"
    type="checkbox"
    show={id}
    {id}
    {name}
    {...rest}
  />
  <Icon
    class="checkbox-icon"
    name="check"
    {size}
  />
  <Fragment set:html={label} />
</Label>

<style is:global>
  @layer fulldev {
    .checkbox {
      display: flex;
      align-items: center;
      gap: var(--spacing-2);

      .checkbox-input {
        appearance: none;
        cursor: pointer;
        border: 1px solid var(--color-primary);
        border-radius: var(--radius-sm);
        background-color: transparent;
        width: 1em;
        height: 1em;
        accent-color: var(--color-primary);
      }

      .icon.checkbox-icon {
        position: absolute;
        background-color: transparent;
        padding: var(--spacing-0-5);
        color: var(--color-background);

        * {
          stroke-width: 3.5px !important;
        }
      }

      &.size-sm {
        .checkbox-input,
        .icon.checkbox-icon {
          width: var(--spacing-3-5) !important;
          height: var(--spacing-3-5) !important;
        }
      }
      &.size-md {
        .checkbox-input,
        .checkbox-icon {
          width: var(--spacing-4) !important;
          height: var(--spacing-4) !important;
        }
      }

      &.size-lg {
        .checkbox-input,
        .checkbox-icon {
          width: 1.125rem !important;
          height: 1.125rem !important;
        }
      }
    }
  }
</style>
