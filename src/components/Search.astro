---
import Pagefind from 'astro-pagefind/components/Search'
import Dialog from './Dialog.astro'

const { variant = 'secondary', icon, ...rest } = Astro.props
---

<Dialog
  class:list="search"
  id="search"
  {variant}
  {icon}
  {...rest}
>
  <Pagefind uiOptions={{ showImages: false }} />
</Dialog>

<style is:global lang="scss">
  :root {
    --pagefind-ui-primary: var(--brand-11);
    --pagefind-ui-text: var(--base-12);
    --pagefind-ui-background: var(--base-2);
    --pagefind-ui-border: var(--base-6);
    --pagefind-ui-tag: var(--base-6);
  }

  @media (max-width: 1023.999px) {
    .search,
    #search,
    #search-button {
      display: none !important;
    }
  }

  .dialog div {
    width: 100%;
  }

  .pagefind-ui__search-input {
    outline: none !important;
    border: 1px solid var(--base-7);
    color: var(--base-11);

    &::placeholder {
      color: var(--base-11);
    }

    &:hover {
      outline: none;
    }

    &:focus {
      outline: none;
      box-shadow: inset 0 0 0 2px var(--base-8);
      border-color: var(--base-8);
    }
  }

  .pagefind-ui__search-clear {
    background: transparent !important;
  }
</style>
