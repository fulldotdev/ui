---
import Column from 'fulldev-ui/components/Column.astro'
import Heading from 'fulldev-ui/components/Heading.astro'
import Link from 'fulldev-ui/components/Link.astro'

interface Props {
  logo?: string
  items?: {
    heading?: string
    links?: {
      text?: string
      href?: string
    }[]
  }[]
}

const { items } = Astro.props
const slug = Astro.url.pathname.replace(/^\/|\/$/g, '')
const url = Astro.url.href
---

<Column
  as="aside"
  class:list="sidebar"
>
  {
    items &&
      items.length > 0 &&
      items.map((item: any) => (
        <>
          <Heading
            level={6}
            set:html={item.heading}
          />
          {item.links?.map((link: any) => (
            <Link
              {...link}
              class="sidebar-link"
              color={url.endsWith(link.href) ? 'brand' : undefined}
            />
          ))}
        </>
      ))
  }
</Column>

<style lang="scss" is:global>
  :root {
    --sidebar-width: 240px;
  }

  @layer fulldev {
    .sidebar {
      display: none !important;
      position: fixed;
      top: var(--header-height);
      left: 0;
      box-sizing: border-box;
      border-right: 1px solid var(--color-a6);
      padding: var(--spacer) 24px;
      width: var(--sidebar-width);
      height: calc(100vh - var(--header-height));
      max-height: 100vh;
      overflow-y: auto;

      .sidebar-link {
        font-size: var(--text-2);
      }

      @media (min-width: 1024px) {
        display: flex !important;
      }
    }
  }
</style>
