---
import Column from 'fulldev-ui/components/Column.astro'
import Heading from 'fulldev-ui/components/Heading.astro'
import Link from 'fulldev-ui/components/Link.astro'

const { heading, search, links } = Astro.props
---

<Column
  as="aside"
  class:list="sidebar"
>
  <Heading
    level={5}
    html={heading}
  />
  <!-- TODO search -->
  {
    links?.map(({ heading, slug, href, text, links }: any) => (
      <>
        <Heading
          level={6}
          html={heading}
        />
        <Link
          {slug}
          {href}
          {text}
          class="sidebar-link"
        />
        {links?.map((link: any) => (
          <Link
            {...link}
            class="sidebar-link"
          />
        ))}
      </>
    ))
  }
</Column>

<style lang="scss" is:global>
  :root {
    --sidebar-width: 240px;
  }

  @layer fulldev {
    .sidebar {
      display: none !important;
      position: fixed;
      top: 0;
      left: 0;
      box-sizing: border-box;
      border-right: 1px solid var(--color-a6);
      padding: var(--space-5) var(--gutter);
      width: var(--sidebar-width);
      height: 100vh;
      max-height: 100vh;
      overflow-y: auto;

      .sidebar-link {
        font-size: var(--text-2);
      }

      @media (min-width: 1024px) {
        display: flex !important;
      }
    }
  }
</style>
