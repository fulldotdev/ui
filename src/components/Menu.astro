---
import Box from '@/components/Box.astro'
import Link from '@/components/Link.astro'
import { cn } from '@/lib/utils'
import type { MenuSchema } from '@/schemas/components/menu'
import type { HTMLAttributes } from 'astro/types'

interface Props extends HTMLAttributes<'div'>, MenuSchema {}

const { text, href, links, ...rest } = Astro.props
---

<Box
  class={cn('menu inline-flex flex-col items-start gap-2 text-foreground')}
  as="div"
  {...rest}
>
  <Box
    class="font-medium"
    as={text ? 'h6' : 'div'}
  >
    {
      href ? (
        <Link
          {href}
          {text}
        />
      ) : (
        <Fragment set:html={text} />
      )
    }
  </Box>
  <Box
    as="menu"
    class="flex flex-col gap-2"
  >
    {
      links?.map((link) => (
        <Box as="li">
          <Link
            class="text-muted-foreground hover:text-foreground font-normal transition-colors"
            {...link}
          />
        </Box>
      ))
    }
  </Box>
</Box>
