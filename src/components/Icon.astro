---
import tablerIcons from '@iconify-json/tabler/icons.json'
import type { HTMLAttributes } from 'astro/types'
import Element from 'fulldev-ui/components/Element.astro'

interface Props extends HTMLAttributes<'svg'> {
  size?: 'sm' | 'md' | 'lg' | undefined
  name?: string | undefined
}

const { size = 'md', name, ...rest } = Astro.props

const trimmedName = name?.trim()
const icon = trimmedName
  ? (tablerIcons as any)?.icons[trimmedName]?.body
  : undefined
---

<Element
  class:list={`icon size-${size}`}
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 24 24"
  as="svg"
  {...rest}
>
  <Fragment set:html={icon} />
</Element>

<style>
  .icon {
    display: inline-flex;
    width: 1em;
    height: 1em;

    & :global(*) {
      stroke-width: calc(1em / 12);
    }

    &.size-sm {
      font-size: var(--text-lg);
    }

    &.size-md {
      font-size: var(--text-xl);
    }

    &.size-lg {
      font-size: var(--text-2xl);
    }
  }
</style>
