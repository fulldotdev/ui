---
import Box from '@/components/Box.astro'
import Icon from '@/components/Icon.astro'
import { cn } from '@/lib/utils'
import type { HTMLAttributes } from 'astro/types'

interface Props extends HTMLAttributes<'div'> {
  score?: number | undefined | null
}

const { score, class: className, ...rest } = Astro.props

const getIcon = (count: number) => {
  if (!score) return
  const difference = score - count
  if (difference >= -0.25) return 'star-filled'
  if (difference >= -0.75) return 'star-half-filled'
  return 'star'
}
---

<Box
  class={cn('flex gap-1 text-base', className)}
  {...rest}
>
  {
    score &&
      [1, 2, 3, 4, 5].map((count) => (
        <Icon
          class="!text-primary size-[1em]"
          name={getIcon(count)}
        />
      ))
  }
</Box>
