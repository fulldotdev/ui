---
import Element from '@/components/Element.astro'
import Icon from '@/components/Icon.astro'
import type { HTMLAttributes } from 'astro/types'

interface Props extends HTMLAttributes<'div'> {
  size?: 'sm' | 'md' | 'lg' | undefined
  score?: number | undefined
}

const { size = 'md', score, ...rest } = Astro.props

const getIcon = (count: number) => {
  if (!score) return
  const difference = score - count
  if (difference >= -0.25) return 'star-filled'
  if (difference >= -0.75) return 'star-half-filled'
  return 'star'
}
---

<Element
  class:list="flex gap-1"
  {...rest}
>
  {
    score &&
      [1, 2, 3, 4, 5].map((count) => (
        <Icon
          class="!h-4 !w-4 !text-primary"
          name={getIcon(count)}
          {size}
        />
      ))
  }
</Element>
