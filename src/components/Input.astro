---
import type { HTMLAttributes } from 'astro/types'
import Element from 'fulldev-ui/components/Element.astro'
import Icon from 'fulldev-ui/components/Icon.astro'
import Label from 'fulldev-ui/components/Label.astro'
import { inputVariants } from './shadcn/input'

interface Props extends HTMLAttributes<'div'> {
  label?: string | undefined
  icon?: string | undefined
  // input
  type?: 'text' | 'email' | 'tel' | 'password' | 'file'
  placeholder?: string
  name?: string
  id?: string
  value?: string
  disabled?: boolean
  required?: boolean
  readonly?: boolean
}

const {
  label,
  icon,
  // input
  type = 'text',
  placeholder,
  name = label || placeholder,
  id = name,
  value,
  disabled,
  required,
  readonly,
  ...rest
} = Astro.props
---

<Element
  class:list="input flex flex-col relative"
  {...rest}
>
  <Label
    class="pb-1.5"
    for={id}
    text={label}
  />
  <Icon
    class="absolute bottom-2.5 right-2.5"
    name={icon}
  />
  <Element
    show={id}
    class:list={[inputVariants()]}
    as="input"
    {type}
    {placeholder}
    {name}
    {id}
    {value}
    {disabled}
    {required}
    {readonly}
  />
</Element>
