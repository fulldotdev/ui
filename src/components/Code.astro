---
import { Code as AstroCode } from 'astro:components'
import Element from 'fulldev-ui/components/Element.astro'
import type { ComponentProps } from 'react'

interface Props extends ComponentProps<typeof AstroCode> {}

const { code } = Astro.props
const slot = await Astro.slots.render('code')
---

<Element class:list="code">
  <div class="example">
    <slot name="example" />
    <Fragment set:html={code} />
  </div>
  <slot name="code" />
  {
    code && (
      <AstroCode
        class:list="code"
        code={code}
      />
    )
  }
</Element>

<style is:global>
  @layer fulldev {
    .astro-code {
      @apply mt-4 rounded-md p-4 text-sm first:mt-0;
    }

    .code {
      @apply mt-8 overflow-hidden rounded-md border first:mt-0;

      .example {
        @apply flex flex-wrap items-center gap-2 px-4 py-8;

        > *,
        > slot > * {
          @apply mt-0;
        }
      }

      .astro-code {
        @apply rounded-none border-none p-4;
      }
    }
  }
</style>
