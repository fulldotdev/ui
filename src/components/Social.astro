---
import Button from '@/components/Button.astro'
import { cn } from '@/lib/utils'
import type { ComponentProps } from 'astro/types'

interface Props extends Omit<ComponentProps<typeof Button>, 'text' | 'icon' | 'target' | 'size'> {}

const { href, variant = 'ghost', class: className, ...rest } = Astro.props

const platform = () => {
  if (typeof href !== 'string') return
  if (href.includes('x.com')) return 'brand-x'
  if (href.includes('facebook')) return 'brand-facebook'
  if (href.includes('instagram')) return 'brand-instagram'
  if (href.includes('linkedin')) return 'brand-linkedin'
  if (href.includes('youtube')) return 'brand-youtube'
  if (href.includes('tiktok')) return 'brand-tiktok'
  if (href.includes('twitch')) return 'brand-twitch'
  if (href.includes('github')) return 'brand-github'
  if (href.includes('discord')) return 'brand-discord'
  return undefined
}
---

<Button
  class={cn('social', className)}
  icon={platform()}
  target="_blank"
  size="sm"
  {href}
  {variant}
  {...rest}
/>
