---
import type { ComponentProps } from 'astro/types'
import Button from 'fulldev-ui/components/Button.astro'

interface Props extends Omit<ComponentProps<typeof Button>, 'text' | 'icon' | 'target' | 'size'> {
  variant?: ComponentProps<typeof Button>['variant'] | undefined
}

const platform = (href: string | undefined) => {
  if (typeof href !== 'string') return
  if (href.includes('x.com')) return 'brand-x'
  if (href.includes('facebook')) return 'brand-facebook'
  if (href.includes('instagram')) return 'brand-instagram'
  if (href.includes('linkedin')) return 'brand-linkedin'
  if (href.includes('youtube')) return 'brand-youtube'
  if (href.includes('tiktok')) return 'brand-tiktok'
  if (href.includes('twitch')) return 'brand-twitch'
  if (href.includes('github')) return 'brand-github'
  if (href.includes('discord')) return 'brand-discord'
  return undefined
}

const { href, variant = 'ghost', ...rest } = Astro.props
---

<Button
  class:list="social"
  icon={platform(href)}
  target="_blank"
  size="sm"
  {href}
  {variant}
  {...rest}
/>
