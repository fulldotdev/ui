---
import type { ComponentProps } from 'astro/types'
import Carousel from 'fulldev-ui/components/Carousel.astro'
import Element from 'fulldev-ui/components/Element.astro'
import Image from 'fulldev-ui/components/Image.astro'

interface Props {
  images?: ComponentProps<typeof Image>[] | undefined
}

const { images } = Astro.props
---

<Element class="gallery">
  <Carousel class="large">
    {
      images?.map((image, i) => (
        <Element class="item">
          <div
            class="target"
            id={`image-${i}`}
          />
          <Image {...image} />
        </Element>
      ))
    }
  </Carousel>
  <Carousel class="small">
    {
      images?.map((image, i) => (
        <Element
          class="item"
          as="a"
          href={`#image-${i}`}
        >
          <Image {...image} />
        </Element>
      ))
    }
  </Carousel>
</Element>

<style>
  @layer fulldev {
    .gallery {
      display: flex;
      position: relative;
      flex-direction: column;
      align-items: center;
      gap: var(--spacing-2);
      width: 100%;
    }

    .large {
      .item {
        width: 100%;
      }

      .target {
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        transform: translateY(-100vh);
        opacity: 0;
        z-index: -10;
        width: 100%;
        height: 0px;
        pointer-events: none;
      }
    }

    .small {
      gap: var(--spacing-2);

      .item {
        width: var(--spacing-28);

        &:hover .image {
          opacity: 0.75;
        }
      }
    }

    .image {
      transition: var(--transition);
      background-color: var(--color-muted);
      aspect-ratio: 1/1;
      width: 100%;
      height: 100%;
      object-fit: contain;
      object-position: center;
    }
  }
</style>
