---
import type { ComponentProps, HTMLAttributes } from 'astro/types'
import Element from 'fulldev-ui/components/Element.astro'
import Icon from 'fulldev-ui/components/Icon.astro'
import type { GlobalProps } from 'fulldev-ui/types/global-props'

interface Props extends GlobalProps, HTMLAttributes<'div'> {
  icon?: ComponentProps<typeof Icon>['name']
  text?: string | undefined
  reverse?: boolean | undefined
  variant?: 'primary' | 'secondary' | 'outline' | undefined
}

const { variant = 'outline', text, icon, ...rest } = Astro.props
---

<Element
  class:list="badge"
  {variant}
  {...rest}
>
  <slot />
  <Icon name={icon} />
  <Fragment set:html={text} />
</Element>

<style is:global>
  @layer fulldev {
    .badge {
      @apply inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors;
      @apply focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2;

      &.variant-primary {
        @apply border-transparent bg-primary text-primary-foreground hover:bg-primary/80;
      }

      &.variant-secondary {
        @apply border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80;
      }

      &.variant-outline {
        @apply text-foreground;
      }
    }
  }
</style>
