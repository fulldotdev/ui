---
import type { HTMLAttributes } from 'astro/types'
import Element from 'fulldev-ui/components/Element.astro'

interface Props
  extends HTMLAttributes<'h1' | 'h2' | 'h3' | 'h4' | 'h5' | 'h6'> {
  as?: 'h1' | 'h2' | 'h3' | 'h4' | 'h5' | 'h6' | undefined
  depth?: 1 | 2 | 3 | 4 | 5 | 6 | number | undefined
  text?: string | undefined
  size?:
    | 'xs'
    | 'sm'
    | 'md'
    | 'lg'
    | 'xl'
    | '2xl'
    | '3xl'
    | '4xl'
    | '5xl'
    | '6xl'
    | undefined
}

const { depth = 2, as = `h${depth}`, text, ...rest } = Astro.props
---

<Element
  class:list="heading"
  {as}
  {...rest}
>
  <Fragment set:html={text} />
  <slot />
</Element>

<style is:global>
  .heading,
  .prose > :is(h1, h2, h3, h4, h5, h6) {
    scroll-margin-top: var(--spacing-20);
    color: var(--color-foreground);
    font-weight: var(--font-weight-bold);
    letter-spacing: var(--tracking-tight);

    code {
      border-radius: var(--radius-sm);
      background-color: var(--color-muted);
      padding: var(--spacing-0-5) var(--spacing-1);
      font-family: var(--font-mono);
    }

    &.size-xs {
      font-size: var(--text-xs);
      line-height: var(--text-xs--line-height);
    }

    &.size-sm {
      font-size: var(--text-sm);
      line-height: var(--text-sm--line-height);
    }

    &:where(.prose > h6),
    &.size-md {
      font-size: var(--text-base);
      line-height: var(--text-base--line-height);
    }

    &:where(.prose > h5),
    &.size-lg {
      font-size: var(--text-lg);
      line-height: var(--text-lg--line-height);
    }

    &:where(.prose > h4),
    &.size-xl {
      font-size: var(--text-xl);
      line-height: var(--text-xl--line-height);
    }

    &:where(.prose > h3),
    &.size-2xl {
      font-size: var(--text-2xl);
      line-height: var(--text-2xl--line-height);
    }

    &:where(.prose > h2),
    &.size-3xl {
      font-size: var(--text-3xl);
      line-height: var(--text-3xl--line-height);
    }

    &.size-4xl {
      font-size: var(--text-4xl);
      line-height: var(--text-4xl--line-height);
    }

    &:where(.prose > h1),
    &.size-5xl {
      font-size: var(--text-4xl);
      line-height: var(--text-4xl--line-height);

      @media (min-width: 1024px) {
        font-size: var(--text-5xl);
        line-height: var(--text-5xl--line-height);
      }
    }

    &.size-6xl {
      font-size: var(--text-5xl);
      line-height: var(--text-5xl--line-height);

      @media (min-width: 1024px) {
        font-size: var(--text-6xl);
        line-height: var(--text-6xl--line-height);
      }
    }
  }
</style>
