---
import type { HTMLAttributes, HTMLTag } from 'astro/types'
import Element from 'fulldev-ui/components/Element.astro'
import type { GlobalProps } from 'fulldev-ui/types/global-props'

interface Props extends GlobalProps, HTMLAttributes<'h2'> {
  as?: HTMLTag
  level?: 1 | 2 | 3 | 4 | 5 | 6 | undefined
  text?: string | undefined
}

const { level = 2, as = `h${level}`, text, ...rest } = Astro.props
---

<Element
  class:list="heading"
  {as}
  {level}
  {...rest}
>
  <slot />
  <Fragment set:html={text} />
</Element>

<style is:global>
  .heading,
  .prose :is(h1, h2, h3, h4, h5, h6) {
    @apply mt-8 scroll-mt-20 font-semibold tracking-tight first:mt-0;

    &:is(h1) {
      @apply font-extrabold;
    }

    &.size-sm,
    &:where(.size-sm &) {
      &:is(h1) {
        @apply text-3xl;
      }

      &:is(h2) {
        @apply text-2xl;
      }

      &:is(h3) {
        @apply text-xl;
      }

      &:is(h4) {
        @apply text-lg;
      }

      &:is(h5) {
        @apply text-base;
      }

      &:is(h6) {
        @apply text-sm;
      }
    }

    &:where(.size-md),
    &:where(.size-md &) {
      &:is(h1) {
        @apply text-4xl;
      }

      &:is(h2) {
        @apply text-3xl;
      }

      &:is(h3) {
        @apply text-2xl;
      }

      &:is(h4) {
        @apply text-xl;
      }

      &:is(h5) {
        @apply text-lg;
      }

      &:is(h6) {
        @apply text-base;
      }
    }

    &.size-lg,
    &:where(.size-lg &) {
      &:is(h1) {
        @apply text-5xl lg:text-6xl;
      }

      &:is(h2) {
        @apply text-4xl;
      }

      &:is(h3) {
        @apply text-3xl;
      }

      &:is(h4) {
        @apply text-2xl;
      }

      &:is(h5) {
        @apply text-xl;
      }

      &:is(h6) {
        @apply text-lg;
      }
    }
  }
</style>
