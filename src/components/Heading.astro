---
import type { HTMLAttributes, HTMLTag } from 'astro/types'
import Element from 'fulldev-ui/components/Element.astro'
import type { GlobalProps } from 'fulldev-ui/types/global-props'
import { slugify } from 'fulldev-ui/utils/slugify'

interface Props extends GlobalProps, HTMLAttributes<'h2'> {
  as: HTMLTag
  text?: string | undefined
  muted?: boolean | undefined
}

const {
  as = 'h2',
  text,
  id = text ? slugify(text) : undefined,
  ...rest
} = Astro.props
---

<Element
  class:list="heading"
  {as}
  {id}
  {...rest}
>
  <Fragment set:html={text} />
  <slot />
</Element>

<style is:global>
  .heading {
    @apply scroll-mt-20 font-bold tracking-tight text-foreground;

    &.muted {
      @apply text-muted-foreground;
    }

    &,
    &.size-md {
      @apply text-base;
    }

    &.size-xs {
      @apply text-xs;
    }

    &.size-sm {
      @apply text-sm;
    }

    &.size-lg {
      @apply text-lg;
    }

    &.size-xl {
      @apply text-xl;
    }

    &.size-2xl {
      @apply text-2xl;
    }

    &.size-3xl {
      @apply text-3xl;
    }

    &.size-4xl {
      @apply text-4xl;
    }

    &.size-5xl {
      @apply text-5xl lg:text-6xl;
    }
  }
</style>
