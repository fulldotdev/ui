---
import Select from 'fulldev-ui/components/Select.astro'
// const defaultTheme = fulldevConfig.colors.theme || 'light'
---

<Select
  class:list="theme-select"
  name="theme-select"
  options={['light', 'dark']}
  value="light"
  onchange="localStorage.setItem('theme', this.value); window.location.reload();"
/>

<script>
  const setOption = (document: Document) => {
    const select = document.querySelector('#theme-select')
    const theme = localStorage.getItem('theme') || ''
    const options = select?.querySelectorAll('option')
    options?.forEach((option) => {
      if (option.value === theme) option.selected = true
      else option.selected = false
    })
  }

  setOption(document)

  document.addEventListener('astro:before-swap', (event) => {
    setOption(event.newDocument)
  })
</script>

<style is:global lang="scss">
  .theme-select {
    width: calc(1.4 * var(--space-7));
  }
</style>
