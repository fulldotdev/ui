---
import { getCollection, getEntries } from "astro:content"

import { type ReviewsSchema } from "@/schemas/blocks/reviews"
import Reviews1 from "@/components/blocks/reviews-1"

type Props = ReviewsSchema

const { variant = "1", reviews, html, ...block } = Astro.props

let entries = reviews
  ? await getEntries(reviews)
  : await getCollection("reviews")

const items = entries.map(({ data }) => data)
---

{
  variant === "1" && (
    <Reviews1 reviews={items} {...block}>
      <Fragment set:html={html} />
    </Reviews1>
  )
}

{
  variant === "2" && (
    <Reviews1 client:load reviews={items} {...block}>
      <Fragment set:html={html} />
    </Reviews1>
  )
}
