---
import { type FeaturesSchema } from "@/schemas/blocks/features"
import { transformImage } from "@/lib/transform-image"
import Features1 from "@/components/blocks/features-1"

type Props = FeaturesSchema

const { variant, features, html, ...schema } = Astro.props

const props = {
  ...schema,
  features:
    features &&
    (await Promise.all(
      features.map(async (feature) => ({
        ...feature,
        image: await transformImage(feature.image),
      }))
    )),
}
---

{
  variant === "1" && (
    <Features1 {...props}>
      <Fragment set:html={html} />
    </Features1>
  )
}
