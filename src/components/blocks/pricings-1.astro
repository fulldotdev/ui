---
import type { ComponentProps } from "astro/types"

import { cn } from "@/lib/utils"
import { Button } from "@/components/ui/button"
import { List, ListItem } from "@/components/ui/list"
import {
  Section,
  SectionActions,
  SectionContent,
  SectionGrid,
  SectionTypography,
} from "@/components/ui/section"
import { Tile, TileContent, TileTypography } from "@/components/ui/tile"

interface Props extends ComponentProps<typeof Section> {
  size?: ComponentProps<typeof SectionTypography>["size"]
  buttons?: ComponentProps<typeof Button>[]
  items?: {
    title?: string
    description?: string
    icon?: string
    list?: string[]
    button?: ComponentProps<typeof Button>
    price?: string
    unit?: string
  }[]
}

const {
  class: className,
  align,
  size,
  buttons,
  items,
  frame,
  variant,
  ...props
} = Astro.props
---

<Section class={cn("", className)} {...props}>
  <SectionContent align={align}>
    <SectionTypography align={align} size={size}>
      <slot />
    </SectionTypography>
    <SectionActions align={align}>
      {
        buttons?.map((button, i) => (
          <Button
            variant={i === 0 ? "default" : "outline"}
            size={size}
            {...button}
          />
        ))
      }
    </SectionActions>
  </SectionContent>
  <SectionGrid>
    {
      items?.map(({ title, description, button, list, price, unit }) => (
        <Tile frame={frame} variant={variant}>
          <TileContent>
            <TileTypography
              align={align}
              size={size}
              title={title}
              description={description}
            />
            {(price || unit) && (
              <div class="font-semibold">
                {price && <span class="text-foreground text-2xl">{price}</span>}
                {unit && (
                  <span class="text-muted-foreground ml-1.5 text-sm font-normal">
                    / {unit}
                  </span>
                )}
              </div>
            )}
            <List>
              {list?.map((item) => (
                <ListItem>{item}</ListItem>
              ))}
            </List>
            <Button class="mt-auto w-full" size={size} {...button} />
          </TileContent>
        </Tile>
      ))
    }
  </SectionGrid>
</Section>
