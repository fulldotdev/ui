---
import { getEntry } from "astro:content"

import type { ArticleSchema } from "@/schemas/blocks/article"
import { transformImage } from "@/lib/transform-image"
import Article1 from "@/components/blocks/article-1"

type Props = ArticleSchema

const { variant, person, image, ...schema } = Astro.props

const personEntry = person && (await getEntry(person))

const props = {
  ...schema,
  image: await transformImage(image),
  person: {
    ...personEntry?.data,
    image: await transformImage(personEntry?.data.image),
  },
}
---

{
  variant === "1" && (
    <Article1 {...props}>
      <slot />
    </Article1>
  )
}
