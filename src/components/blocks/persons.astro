---
import { getCollection, getEntries } from "astro:content"

import { type PersonsSchema } from "@/schemas/blocks/persons"
import Persons1 from "@/components/blocks/persons-1"

type Props = PersonsSchema

const { variant = "1", persons, html, ...block } = Astro.props

const personsData = (
  persons ? await getEntries(persons) : await getCollection("persons")
).map((person) => ({
  href: `/persons/${person.id}`,
  ...person.data,
}))
---

{
  variant === "1" && (
    <Persons1 persons={personsData} {...block}>
      <Fragment set:html={html} />
    </Persons1>
  )
}
