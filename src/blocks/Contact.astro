---
import { getEntry } from 'astro:content'
import Button from 'fulldev-ui/components/Button.astro'
import Column from 'fulldev-ui/components/Column.astro'
import Channel from 'fulldev-ui/components/experimental/Channel.astro'
import Form from 'fulldev-ui/components/experimental/Form.astro'
import Heading from 'fulldev-ui/components/Heading.astro'
import Image from 'fulldev-ui/components/Image.astro'
import Input from 'fulldev-ui/components/Input.astro'
import Row from 'fulldev-ui/components/Row.astro'
import Section from 'fulldev-ui/components/Section.astro'
import Tagline from 'fulldev-ui/components/Tagline.astro'
import Text from 'fulldev-ui/components/Text.astro'
import Textarea from 'fulldev-ui/components/Textarea.astro'

const {
  data: { channels },
} = await getEntry('settings', 'base')

const {
  heading,
  form,
  text,
  tagline,
  googleMaps,
  buttons,
  socials,
  position,
  image,
  ...rest
} = Astro.props
---

<Section
  class:list={'contact'}
  structure="split"
  {...rest}
>
  <Column>
    <Tagline text={tagline} />
    <Heading
      level={1}
      text={heading}
    />
    <Text text={text} />
    <Row>
      {buttons?.map((button: any) => <Button {...button} />)}
    </Row>

    <Column>
      <Channel
        icon="phone"
        heading={channels?.phone?.heading}
        text={channels?.phone?.text}
        href={`tel:${channels?.phone?.value}`}
      />
      <Channel
        icon="mail"
        heading={channels?.email?.heading}
        text={channels?.email?.text}
        href={`mailto:${channels?.email?.value}`}
      />
      {
        channels?.address && (
          <Channel
            icon="pin"
            heading={channels.address.heading}
            text={channels.address.text}
          />
        )
      }
    </Column>

    {
      socials && (
        <Row size="sm">
          {socials?.facebook && (
            <Button
              href={socials?.facebook}
              variant="secondary"
              icon="brand-facebook"
            />
          )}
          {socials?.instagram && (
            <Button
              href={socials?.instagram}
              variant="secondary"
              icon="brand-instagram"
            />
          )}
        </Row>
      )
    }

    <Form
      action="/bedankt"
      method="POST"
    >
      <Input
        label={form?.name}
        id="Naam"
        name="Naam"
        type="text"
        required
      />
      <Input
        label={form?.email}
        id="Email"
        name="Email"
        type="email"
        required
      />
      <Input
        label={form?.phone}
        id="Telefoon"
        name="Telefoon"
        type="tel"
        required
      />
      <Textarea
        label={form?.message}
        id="Bericht"
        name="Bericht"
      />
      <Button
        as="button"
        type="submit"
        color="brand"
        text={form?.button}
      />
    </Form>
  </Column>

  <!-- <iframe
    src={googleMaps}
    width="100%"
    height="450"
    style="border:0; margin-top: var(--space-6);"
    allowfullscreen="false"
    loading="lazy"
    referrerpolicy="no-referrer-when-downgrade"
  ></iframe> -->
  <Image
    {position}
    src={image}
  />
</Section>

<style is:global lang="scss">
  @layer fulldev {
    .contact {
      .channel + .channel {
        margin-top: var(--space-3) !important;
      }
    }
  }
</style>
