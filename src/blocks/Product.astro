<!-- ---
import { getImage } from 'astro:assets'
import CartForm from 'fulldev-ui/components/CartForm.astro'
import Element from 'fulldev-ui/components/Element.astro'
import Gallery from 'fulldev-ui/components/Gallery.astro'
import Heading from 'fulldev-ui/components/Heading.astro'
import List from 'fulldev-ui/components/List.astro'

const {
  as = 'section',
  size = 'md',
  variant = 1,
  level = 1,
  heading,
  paragraph,
  title,
  list,
  price,
  images,
  text,
  subheading,
  variants,
  button,
  description,
  form,
  uitverkocht,
  ...rest
} = Astro.props

const slug = Astro.url.pathname.replace(/^\/|\/$/g, '') || 'index'
const imageId = images?.[0]?.id
const src = `/src/images/${imageId}`
const allImages = import.meta.glob<{ default: ImageMetadata }>('/src/images/*')
const foundImage = allImages[src]
const gotImage =
  imageId && (await getImage({ src: foundImage ? foundImage() : src }))
---

<Element
  class:list="product"
  {as}
  {size}
  {...rest}
>
  <Element class:list="product-container">
    <Gallery {images} />
    <Element class:list="product-segment">
      <Element class:list="product-content">
        <Heading
          {level}
          text={heading || title}
        />
        <Text text={paragraph || description} />
        <List items={list} />
      </Element>
      <CartForm
        soldout={uitverkocht}
        image={gotImage?.src}
        {title}
        {price}
        {slug}
        {variants}
      />
    </Element>
  </Element>
</Element>

<style is:global>
  .product {
    @apply relative w-full;

    .product-container {
      @apply container flex h-full w-full flex-col gap-16 py-8 lg:grid lg:grid-cols-[3fr_2fr];
    }

    .product-segment {
      @apply z-10 flex flex-col items-start gap-8;
    }

    .product-content {
      @apply flex max-w-screen-md flex-col gap-6;
    }

    &.dark {
      @apply bg-background;
    }
  }
</style> -->
