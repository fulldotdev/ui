---
import type { ComponentProps } from 'astro/types'
import { render } from 'astro:content'
import Block from 'fulldev-ui/components/Block.astro'
import Element from 'fulldev-ui/components/Element.astro'
import Heading from 'fulldev-ui/components/Heading.astro'
import type { PageSchema } from 'fulldev-ui/schemas/page.ts'
import Container from 'fulldev-ui/structures/Container.astro'
import Layout from 'fulldev-ui/structures/Layout.astro'

type Props = ComponentProps<typeof Layout> & PageSchema

const { block, variants, header, footer, ...rest } = Astro.props

const { Content, headings } = await render(Astro.props as any)
---

<Layout
  class:list="page"
  {...rest}
>
  <!-- <Block
    block="Banner"
    {...banner}
  /> -->
  <Block
    block="Header"
    {...header}
  />
  <Element as="main">
    {
      Array.from({ length: variants || 1 }).map((_, index) => (
        <>
          <Container>
            <Heading text={`${block} ${index + 1}`} />
          </Container>
          <Block
            block={block}
            variant={index + 1}
            {headings}
            {...rest}
          >
            <Content />
          </Block>
        </>
      ))
    }
  </Element>
  <Block
    block="Footer"
    {...footer}
  />
</Layout>
