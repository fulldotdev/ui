---
import type { CollectionEntry } from 'astro:content'
import { getEntry } from 'astro:content'
import Prose from 'fulldev-ui/components/Prose.astro'
import Layout from 'fulldev-ui/layouts/Layout.astro'
import { mergeDeep } from 'remeda'

type Props = CollectionEntry<'posts'>

const layout = await getEntry('layouts', 'posts')
const merged = mergeDeep(layout || {}, Astro.props)

const { render } = merged
---

<Layout {...merged}>
  <Prose
    {render}
    toc={true}
  />
  <slot />
</Layout>
