---
import Footer from '@/blocks/Footer.astro'
import Header from '@/blocks/Header.astro'
import Buttons from '@/components/Buttons.astro'
import Container from '@/components/Container.astro'
import Element from '@/components/Element.astro'
import Image from '@/components/Image.astro'
import Layout from '@/components/Layout.astro'
import List from '@/components/List.astro'
import Prose from '@/components/Prose.astro'
import Section from '@/components/Section.astro'
import Split from '@/components/Split.astro'
import type { CollectionEntry } from 'astro:content'
import { getEntry } from 'astro:content'

interface Props extends CollectionEntry<'jobs'> {}

const { title, description, list, buttons, image, ...rest } = Astro.props.data
const header = (await getEntry('globals', 'header'))?.data
const footer = (await getEntry('globals', 'footer'))?.data
---

<Layout {...rest}>
  <Header {...header} />
  <Element as="main">
    <Section>
      <Container>
        <Split align="sticky">
          <Prose>
            <Element as="h1">{title}</Element>
            <Element as="p">{description}</Element>
            <List items={list} />
            <Buttons {buttons} />
          </Prose>
          <Prose>
            <Image {...image} />
            <slot />
            <Buttons
              class="end"
              {buttons}
            />
          </Prose>
        </Split>
      </Container>
    </Section>
  </Element>
  <Footer {...footer} />
</Layout>

<style>
  @layer fulldev {
    .buttons.end {
      @media (min-width: 1024px) {
        display: none;
      }
    }
  }
</style>
