---
import type { ComponentProps } from 'astro/types'
import type { CollectionEntry } from 'astro:content'
import Content1 from 'fulldev-ui/blocks/Content1.astro'
import Footer from 'fulldev-ui/blocks/Footer.astro'
import Header from 'fulldev-ui/blocks/Header.astro'
import Sidebar from 'fulldev-ui/components/Sidebar.astro'
import type { PageSchema } from 'fulldev-ui/schemas/page.ts'
import Container from 'fulldev-ui/structures/Container.astro'
import Layout from 'fulldev-ui/structures/Layout.astro'

type Props = ComponentProps<typeof Layout> &
  PageSchema & {
    render: CollectionEntry<'pages'>['render']
  }

const { header, sidebar, render, title, description, footer } = Astro.props

const { Content, headings } = await render()
---

<Layout
  class:list="doc"
  {...Astro.props}
>
  <Header
    {...sidebar}
    {...header}
  />
  <Container>
    <Sidebar {...sidebar} />
    <Content1
      heading={title}
      paragraph={description}
      {headings}
    >
      <Content />
    </Content1>
  </Container>
  <Footer {...footer} />
</Layout>

<style is:global>
  @layer fulldev {
    .doc {
      > .container {
        @apply flex;
      }

      .content-1 {
        @apply pt-8;

        .toc {
          @apply top-sticky-8;
        }
      }
    }
  }
</style>
