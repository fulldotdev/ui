---
// @ts-nocheck
import BlockComponent from '@/components/Block.astro'
import Navigation from '@/layouts/Navigation.astro'
import { getHref } from '@/lib/getHref'
import { getEntries } from 'astro:content'

const { categories, products, ...rest } = Astro.props.data

const categoriesEntries =
  categories &&
  (await getEntries(categories)).map((category) => ({
    href: getHref(category),
    ...category.data,
  }))

const productsEntries =
  products &&
  (await getEntries(products)).map((product) => ({
    href: getHref(product),
    ...product.data,
  }))
---

<Navigation {...Astro.props}>
  <BlockComponent
    categories={categoriesEntries}
    products={productsEntries}
    {...rest}
  >
    <slot />
  </BlockComponent>
</Navigation>

<style>
  .carousel {
    display: flex;
    position: relative;
    flex-direction: column;
    align-items: center;
    width: 100%;
    max-height: 80vh;

    .buttons {
      position: absolute;
      bottom: var(--spacing-8);
    }
  }

  .carousel-container {
    display: inline-flex;
    box-sizing: border-box;
    width: 100%;
    overflow-x: scroll;
    scroll-behavior: smooth;
    scroll-snap-type: x mandatory;

    div {
      display: flex;
      flex: none;
      box-sizing: content-box;
      width: 100%;
      scroll-snap-align: center;

      .image {
        width: 100%;
        height: 100%;
        object-fit: contain;
      }
    }

    span {
      position: absolute;
      right: 0;
      bottom: 0;
      background-color: red;
      width: 40px;
      height: 40px;
    }
  }
</style>
