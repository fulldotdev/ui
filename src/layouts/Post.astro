---
import type { ComponentProps } from 'astro/types'
import type { CollectionEntry } from 'astro:content'
import Content1 from 'fulldev-ui/blocks/Content1.astro'
import Footer from 'fulldev-ui/blocks/Footer.astro'
import Header from 'fulldev-ui/blocks/Header.astro'
import Block from 'fulldev-ui/components/Block.astro'
import Element from 'fulldev-ui/components/Element.astro'
import type { PageSchema } from 'fulldev-ui/schemas/page'
import Layout from 'fulldev-ui/structures/Layout.astro'

interface Props extends ComponentProps<typeof Layout>, PageSchema {
  render: CollectionEntry<'pages'>['render']
}

const {
  title,
  description,
  list,
  button,
  header,
  sidebar,
  sections,
  footer,
  render,
} = Astro.props

const { Content, headings } = await render()
---

<Layout
  class:list="post"
  {...Astro.props}
>
  <Header
    {...sidebar}
    {...header}
  />
  <Element as="main">
    <Content1
      heading={title}
      paragraph={description}
      {list}
      {button}
      {headings}
    >
      <Content />
    </Content1>
    {sections?.map((section) => <Block {...section} />)}
  </Element>
  <Footer {...footer} />
</Layout>
