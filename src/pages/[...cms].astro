---
import { actions } from "astro:actions"

import CmsLayout from "@/components/cms/cms-layout"
import Layout from "@/components/layout.astro"

export const prerender = false

const { githubPage } = Astro.params
const id = githubPage === undefined ? "index" : githubPage

const { error, data } = await Astro.callAction(actions.pages.getPage, id)
if (error || data === undefined) return Astro.redirect("/404/")
---

<Layout {...data}>
  <CmsLayout client:load {...data} />
</Layout>
