---
import { getCollection, getEntry } from 'astro:content'
import Footer1 from 'fulldev-ui/blocks/Footer1.astro'
import Header1 from 'fulldev-ui/blocks/Header1.astro'
import Block from 'fulldev-ui/components/Block.astro'
import Element from 'fulldev-ui/components/Element.astro'
import Layout from 'fulldev-ui/components/Layout.astro'
import { getHref } from 'fulldev-ui/utils/getHref'

export async function getStaticPaths() {
  const collection = await getCollection('pages')
  return collection.map((entry) => ({
    params: {
      page: getHref(entry),
    },
    props: entry,
  }))
}

const { sections } = Astro.props.data
const header = (await getEntry('globals', 'header'))?.data
const footer = (await getEntry('globals', 'footer'))?.data
---

<Layout>
  <Header1 {...header} />
  <Element as="main">
    {sections?.map((section) => <Block {...section} />)}
  </Element>
  <Footer1 {...footer} />
</Layout>
