---
import { getCollection } from "astro:content"

import { transformPage } from "@/lib/transforms"
import Page from "@/components/page.astro"

export async function getStaticPaths() {
  const pages = await getCollection("pages")
  return pages.map((page) => {
    const transformed = transformPage(page)
    return {
      params: {
        entry: transformed.href === "/" ? undefined : transformed.href,
      },
      props: transformed,
    }
  })
}
---

<Page {...Astro.props} />
